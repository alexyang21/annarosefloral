<h1 class="center"><%= @event.name %></h1>

<table class="table table-condensed">
  <thead>
    <tr>
      <th>NAME</th>
      <th class="center">COST/UNIT</th>
      <th class="center">QUANTITY</th>
      <th class="center">TOTAL COST</th>
      <th class="center"></th>
    </tr>
  </thead>

  <tbody>
    <% @rental_items.each do |rental_item| %>
    
      <!-- Display rental line items -->
      <tr>
        <td><%= rental_item.rental.name %></td>
        <td class="center"><%= number_to_currency(rental_item.rental.cost) %></td>
        <td class="center"><%= rental_item.quantity %></td>
        <td class="center"><%= number_to_currency(rental_item.rental.cost * rental_item.quantity) %></td>
        <td class="center">
          <div class="btn-group">
            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              Action <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li><%= link_to 'Show', rental_item %></li>
              <li><%= link_to 'Edit', edit_rental_item_path(rental_item) %></li>
              <li><%= link_to 'Destroy', rental_item, method: :delete, data: { confirm: 'Are you sure?' } %></li>
            </ul>
          </div>
        </td>
      </tr>
    <% end %>
    
    <!-- Display rental cost -->
    <tr class="active">
      <td><strong>Rental Cost</strong></td>
      <td></td>
      <td></td>
      <td class="center"><strong><%= number_to_currency(@rental_cost) %></strong></td>
      <td></td>
    </tr>
    
    <!-- Display flower arrangement line items -->
    <% @flower_arrangements.each do |flower_arrangement| %>
      <tr>
        <td><%= flower_arrangement.name %></td>
        <td class="center"><%= number_to_currency(flower_arrangement.cost) %></td>
        <td class="center"><%= flower_arrangement.quantity %></td>
        <td class="center"><%= number_to_currency(flower_arrangement.cost * flower_arrangement.quantity) %></td>
        <td class="center">
          <div class="btn-group">
            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              Action <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li><%= link_to 'Show', flower_arrangement %></li>
              <li><%= link_to 'Edit', edit_flower_arrangement_path(flower_arrangement) %></li>
              <li><%= link_to 'Destroy', flower_arrangement, method: :delete, data: { confirm: 'Are you sure?' } %></li>
            </ul>
          </div>
        </td>
      </tr>
    <% end %>
    
    <!-- Display flower cost -->
    <tr class="active">
      <td><strong>Flower Cost</strong></td>
      <td></td>
      <td></td>
      <td class="center"><strong><%= number_to_currency(@flower_cost) %></strong></td>
      <td></td>
    </tr>
    
    <!-- Display total cost -->
    <tr class="info">
      <td><strong>Total Cost</strong></td>
      <td></td>
      <td></td>
      <td class="center"><strong><%= number_to_currency(@total_cost) %></strong></td>
      <td></td>
    </tr>
  </tbody>
</table>

<%= link_to 'Add rental item', new_event_rental_item_path(@event), class: "btn btn-primary" %>
<%= link_to 'Add flower arrangement', new_event_flower_arrangement_path(@event), class: "btn btn-primary" %>

<br>

<%= link_to 'Edit', edit_event_path(@event) %> |
<%= link_to 'Back', events_path %>
